{
    "id": "unit-3-variable-world",
    "title": "ì‚¬ë¼ì§„ 4,000ë²¨ì˜ í–‰ë°© (ë³€ìˆ˜ì˜ ìƒëª…ì£¼ê¸°ì™€ ìŠ¤ì½”í”„)",
    "description": "ë³€ìˆ˜ì˜ ìŠ¤ì½”í”„(Scope), ë¼ì´í”„ ì‚¬ì´í´(Lifecycle), ì„€ë„ì‰(Shadowing), ì‚¬ì „ ì¡°ê±´(Precondition)ì„ ë°°ì›Œ ì§€ê°‘ì„ ì§€í‚µì‹œë‹¤.",
    "difficulty": "intermediate",
    "language": "java",
    "order": 3,
    "points": 300,
    "steps": [
        {
            "id": 1,
            "title": "Chapter 1. ì‚¬ë¼ì§„ 4,000ë²¨ (Scope)",
            "description": "ë©”ì†Œë“œ ì•ˆì—ì„œ ë§Œë“  ë³€ìˆ˜(`int myBells = 4000`)ëŠ” **'ì§€ì—­ ë³€ìˆ˜(Local Variable)'**ì…ë‹ˆë‹¤. ì´ê±´ ë§ˆì¹˜ **ì ê¹ ì“°ê³  ë²„ë¦¬ëŠ” ì˜ìˆ˜ì¦**ê³¼ ê°™ì•„ì„œ, `sellFish` ë©”ì†Œë“œê°€ ëë‚˜ëŠ” ìˆœê°„ ì‚¬ë¼ì ¸ë²„ë¦½ë‹ˆë‹¤! ğŸ˜±\n\nëˆì„ ì˜êµ¬ì ìœ¼ë¡œ ë³´ê´€í•˜ë ¤ë©´ í´ë˜ìŠ¤ ì „ì²´ê°€ ê³µìœ í•˜ëŠ” **'ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜(ë‚´ ì§€ê°‘)'**ì— ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤. `myBells` ë³€ìˆ˜ë¥¼ ë©”ì†Œë“œ ë°–(í´ë˜ìŠ¤ ì˜ì—­)ìœ¼ë¡œ ì˜®ê²¨ë³´ì„¸ìš”.",
            "prompt": "ìƒì  ì•ˆ(ë©”ì†Œë“œ)ì—ì„œ ë§Œë“  `myBells`ë¥¼ ìƒì  ë°–(í´ë˜ìŠ¤)ì˜ ê°œì¸ ì§€ê°‘ìœ¼ë¡œ ì˜®ê¸°ì„¸ìš”.",
            "template": "public class User {\n    // ì—¬ê¸°ì— ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ì„¸ìš” (ë‚´ ì§€ê°‘)\n    \n    public void sellFish() {\n        int myBells = 4000; // âš ï¸ ì´ê±´ ì§€ì—­ ë³€ìˆ˜(ì˜ìˆ˜ì¦)ì…ë‹ˆë‹¤! ë©”ì†Œë“œê°€ ëë‚˜ë©´ ì‚¬ë¼ì§‘ë‹ˆë‹¤.\n        System.out.println(\"4000ë²¨ íšë“!\");\n    }\n}",
            "solution": "public class User {\n    private int myBells = 0;\n    \n    public void sellFish() {\n        this.myBells += 4000;\n        System.out.println(\"4000ë²¨ íšë“!\");\n    }\n}",
            "estimatedTimeMinutes": 10
        },
        {
            "id": 2,
            "title": "Chapter 2. ë„í”Œê°±ì–´ì˜ ìŠµê²© (Shadowing)",
            "description": "ì§€ê¸ˆ `payLoan` ë©”ì†Œë“œì—ëŠ” ë‘ ëª…ì˜ `myBells`ê°€ ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ëŠ” **'ë‚´ ì§€ê°‘(ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜)'**ì´ê³ , ë‹¤ë¥¸ í•˜ë‚˜ëŠ” **'ê°šì„ ëˆ(ë§¤ê°œë³€ìˆ˜)'**ì…ë‹ˆë‹¤.\n\nìë°”ëŠ” ì´ë¦„ì´ ê°™ìœ¼ë©´ **ê°€ì¥ ê°€ê¹Œìš´ ë…€ì„(ë§¤ê°œë³€ìˆ˜)**ì„ ë¨¼ì € ì³ë‹¤ë´…ë‹ˆë‹¤. ì´ê²ƒì„ **ì„€ë„ì‰(Shadowing)**ì´ë¼ê³  í•©ë‹ˆë‹¤. ğŸ‘¥\n\n**`this.myBells`**ë¼ê³  ì½• ì§‘ì–´ ë§í•´ì„œ 'ë‚´ ì§€ê°‘'ì—ì„œ ëˆì„ ë¹¼ê°€ë„ë¡ ìˆ˜ì •í•˜ì„¸ìš”!",
            "prompt": "`payLoan` ë©”ì†Œë“œì—ì„œ ë¹šì„ ê°šìœ¼ë ¤ëŠ”ë° ëˆì´ ì¤„ì–´ë“¤ì§€ ì•ŠìŠµë‹ˆë‹¤. `this` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ í•´ê²°í•˜ì„¸ìš”.",
            "template": "public class User {\n    private int myBells = 4000;\n    \n    public void payLoan(int myBells) {\n        // âš ï¸ ì—¬ê¸°ì„œ myBellsëŠ” ë§¤ê°œë³€ìˆ˜(ê°šì„ ëˆ)ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤.\n        myBells = myBells - myBells; // ë‚´ ì§€ê°‘(ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜)ì—ì„œ ëˆì„ ë¹¼ì•¼ í•©ë‹ˆë‹¤!\n    }\n}",
            "solution": "public class User {\n    private int myBells = 4000;\n    \n    public void payLoan(int amount) {\n        this.myBells -= amount;\n    }\n}",
            "estimatedTimeMinutes": 10
        },
        {
            "id": 3,
            "title": "Chapter 3. ë§ˆì´ë„ˆìŠ¤ í†µì¥ ë²„ê·¸ (Precondition)",
            "description": "ì§€ê¸ˆ ì½”ë“œëŠ” ëˆì´ ì—†ì–´ë„(`myBells < cost`) ë¬¼ê±´ì„ ì‚´ ìˆ˜ ìˆëŠ” ì‹¬ê°í•œ ë²„ê·¸ê°€ ìˆìŠµë‹ˆë‹¤! ğŸ’¸\n\në¬¼ê±´ì„ êµ¬ë§¤í•˜ëŠ” ì½”ë“œ(`-= cost`)ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì—, **'ëˆì´ ì¶©ë¶„í•œê°€?'**ë¥¼ ë¨¼ì € í™•ì¸í•˜ëŠ” **ë¬¸ì§€ê¸°(`if` ë¬¸)**ë¥¼ ì„¸ì›Œì£¼ì„¸ìš”.\n\nì´ê²ƒì„ ì˜¬ë°”ë¥¸ ì‹¤í–‰ì„ ìœ„í•œ **'ì‚¬ì „ ì¡°ê±´(Precondition)'**ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.",
            "prompt": "`buyTool` ë©”ì†Œë“œì— ëˆì´ ì¶©ë¶„í•œì§€ í™•ì¸í•˜ëŠ” `if` ë¬¸ì„ ì¶”ê°€í•˜ì„¸ìš”.",
            "template": "public class User {\n    private int myBells = 1000;\n    \n    public void buyTool(int cost) {\n        // âš ï¸ ëˆì´ ì—†ì–´ë„ êµ¬ë§¤ê°€ ë©ë‹ˆë‹¤! ë§‰ì•„ì£¼ì„¸ìš”.\n        this.myBells -= cost;\n        System.out.println(\"êµ¬ë§¤ ì™„ë£Œ!\");\n    }\n}",
            "solution": "public class User {\n    private int myBells = 1000;\n    \n    public void buyTool(int cost) {\n        if (this.myBells >= cost) {\n            this.myBells -= cost;\n            System.out.println(\"êµ¬ë§¤ ì™„ë£Œ!\");\n        } else {\n            System.out.println(\"ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.\");\n        }\n    }\n}",
            "estimatedTimeMinutes": 10,
            "scenario": {
                "setting": {
                    "background": "/assets/mission3/nook_store_inside.png",
                    "characters": [
                        {
                            "id": "player",
                            "initialPosition": {
                                "x": 200,
                                "y": 300
                            },
                            "sprite": "/assets/character/player.png",
                            "direction": "right",
                            "scale": 2
                        },
                        {
                            "id": "nook",
                            "initialPosition": {
                                "x": 400,
                                "y": 300
                            },
                            "sprite": "/assets/character/nook.png",
                            "direction": "left",
                            "scale": 2
                        }
                    ]
                },
                "script": [
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "ì˜¤í˜¸! ëŒ€ì¶œê¸ˆì´ ê¹”ë”í•˜ê²Œ ìƒí™˜ë˜ì—ˆêµ°ìš”! `this`ë¥¼ ì•„ì£¼ ì˜ ì‚¬ìš©í•˜ëŠ”êµ¬ë¦¬!",
                        "emotion": "happy"
                    },
                    {
                        "type": "animation",
                        "target": "nook",
                        "animation": "jump",
                        "duration": 500
                    },
                    {
                        "type": "dialogue",
                        "speaker": "player",
                        "text": "íœ´... ì´ì œ ë¹šìŸì´ ìƒí™œ ì²­ì‚°ì¸ê°€ìš”?",
                        "emotion": "normal"
                    },
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "ì, ì‹ ìš©ì´ íšŒë³µë˜ì—ˆìœ¼ë‹ˆ ì¢‹ì€ ë¬¼ê±´ì„ ì†Œê°œí•˜ì£ . 'í™©ê¸ˆ ë‚šì‹¯ëŒ€' ì–´ë•Œìš”? ë‹¨ëˆ 500ë²¨!",
                        "emotion": "happy"
                    },
                    {
                        "type": "dialogue",
                        "speaker": "player",
                        "text": "í•˜ì§€ë§Œ ë°©ê¸ˆ ë¹š ê°šëŠë¼ ë¹ˆí„¸í„°ë¦¬(0ë²¨)ì¸ê±¸ìš”...",
                        "emotion": "sad"
                    },
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "ê±±ì • ë§ì•„ìš”! ìš°ë¦¬ ê°€ê²Œ ì‹œìŠ¤í…œì—” 'ì”ì•¡ í™•ì¸' ê¸°ëŠ¥ì´ ì•„ì§ ì—†ê±°ë“ ìš”. ê·¸ëƒ¥ ê°€ì ¸ê°€ë„ ëª¨ë¥¼ê±¸ìš”? í—ˆí—ˆ!",
                        "emotion": "normal"
                    },
                    {
                        "type": "dialogue",
                        "speaker": "player",
                        "text": "ê·¸ëŸ¼ ë§ˆì´ë„ˆìŠ¤ í†µì¥ì´ ë˜ì–ì•„ìš”! ë²„ê·¸ë¥¼ ê³ ì³ì•¼ê² ì–´ìš”.",
                        "emotion": "concerned"
                    },
                    {
                        "type": "transition",
                        "mode": "IDE"
                    }
                ]
            }
        },
        {
            "id": 4,
            "title": "Chapter 4. ìµœì¢… ë¯¸ì…˜: í’ˆì ˆì…ë‹ˆë‹¤! (Advanced Precondition)",
            "description": "ëˆì´ ìˆì–´ë„ ë¬¼ê±´ì´ ë‹¤ íŒ”ë ¸ìœ¼ë©´(`inStock == false`) êµ¬ë§¤í•  ìˆ˜ ì—†ì–´ì•¼ê² ì£ ? ğŸ“¦\n\në¬¸ì§€ê¸°ë¥¼ í•˜ë‚˜ ë” ì„¸ì›Œë´…ì‹œë‹¤. ì´ë²ˆì—ëŠ” `if` ë¬¸ ì•ˆì—ì„œ **ì¬ê³ (inStock)**ë¥¼ í™•ì¸í•˜ê³ , ì¬ê³ ê°€ ì—†ìœ¼ë©´ `else`ë¥¼ í†µí•´ \"í’ˆì ˆì…ë‹ˆë‹¤!\"ë¼ê³  ì™¸ì¹˜ê²Œ ë§Œë“¤ì–´ë³´ì„¸ìš”.",
            "prompt": "`buyTool` ë©”ì†Œë“œì— **ì¬ê³ ê°€ ì—†ìœ¼ë©´(inStock == false)** \"í’ˆì ˆì…ë‹ˆë‹¤!\"ë¥¼ ì¶œë ¥í•˜ê³  êµ¬ë§¤ë¥¼ ë§‰ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”.",
            "template": "public class User {\n    private int myBells = 2000;\n    private boolean inStock = false; // âš ï¸ ì¬ê³ ê°€ ì—†ìŠµë‹ˆë‹¤!\n    \n    public void buyTool(int cost) {\n        // 1. ëˆì´ ì¶©ë¶„í•œì§€ í™•ì¸\n        if (this.myBells >= cost) {\n            // âš ï¸ ì—¬ê¸°ì— ì¬ê³ (inStock) í™•ì¸ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì„¸ìš”!\n            // ì¬ê³ ê°€ ìˆìœ¼ë©´ -> ëˆ ì°¨ê° & êµ¬ë§¤ ì™„ë£Œ\n            // ì¬ê³ ê°€ ì—†ìœ¼ë©´ -> \"í’ˆì ˆì…ë‹ˆë‹¤!\" ì¶œë ¥\n            \n            this.myBells -= cost;\n            System.out.println(\"êµ¬ë§¤ ì™„ë£Œ!\");\n        } else {\n            System.out.println(\"ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.\");\n        }\n    }\n}",
            "solution": "public class User {\n    private int myBells = 2000;\n    private boolean inStock = false;\n    \n    public void buyTool(int cost) {\n        if (this.myBells >= cost) {\n            if (this.inStock) {\n                this.myBells -= cost;\n                System.out.println(\"êµ¬ë§¤ ì™„ë£Œ!\");\n            } else {\n                System.out.println(\"í’ˆì ˆì…ë‹ˆë‹¤!\");\n            }\n        } else {\n            System.out.println(\"ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.\");\n        }\n    }\n}",
            "estimatedTimeMinutes": 15,
            "scenario": {
                "setting": {
                    "background": "/assets/mission3/nook_store_inside.png",
                    "characters": [
                        {
                            "id": "player",
                            "initialPosition": {
                                "x": 200,
                                "y": 300
                            },
                            "sprite": "/assets/character/player.png",
                            "direction": "right",
                            "scale": 2
                        },
                        {
                            "id": "nook",
                            "initialPosition": {
                                "x": 400,
                                "y": 300
                            },
                            "sprite": "/assets/character/nook.png",
                            "direction": "left",
                            "scale": 2
                        }
                    ]
                },
                "script": [
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "í›Œë¥­í•´ìš”! ì´ì œ 'ì‚¬ì „ ì¡°ê±´(Precondition)' ë•ë¶„ì— ëˆì´ ì—†ìœ¼ë©´ ë¬¼ê±´ì„ ëª» ì‚¬ê²Œ ë˜ì—ˆêµ°ìš”.",
                        "emotion": "happy"
                    },
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©ì„ ì •ë¦¬í•´ë³¼ê¹Œìš”?",
                        "emotion": "normal"
                    },
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "ì²«ì§¸, ëˆì€ ë°”êµ¬ë‹ˆ(ì§€ì—­ ë³€ìˆ˜)ê°€ ì•„ë‹ˆë¼ ì§€ê°‘(ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜)ì— ì±™ê²¨ë¼!"
                    },
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "ë‘˜ì§¸, ì´ë¦„ì´ ê²¹ì¹  ë• 'ë‚´ ê²ƒ(this)'ì´ë¼ê³  í™•ì‹¤íˆ ë§í•´ë¼!"
                    },
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "ì…‹ì§¸, ê±°ë˜í•˜ê¸° ì „ì— í•­ìƒ ì¡°ê±´ì„ í™•ì¸(if)í•´ë¼!"
                    },
                    {
                        "type": "animation",
                        "target": "nook",
                        "animation": "wiggle",
                        "duration": 500
                    },
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "ì, ê·¸ëŸ¼ ë§ˆì§€ë§‰ ë¯¸ì…˜ì…ë‹ˆë‹¤! ëˆì´ ìˆì–´ë„ ë¬¼ê±´ì´ ì—†ìœ¼ë©´ ëª» íŒ”ê² ì£ ?",
                        "emotion": "happy"
                    },
                    {
                        "type": "dialogue",
                        "speaker": "nook",
                        "text": "ì¬ê³ (inStock)ê°€ ì—†ìœ¼ë©´ 'í’ˆì ˆì…ë‹ˆë‹¤!'ë¼ê³  ì™¸ì¹˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì„¸ìš”. ì„±ê³µí•˜ë©´ ì°½ê³ ë¥¼ ëŠ˜ë ¤ë“œë¦¬ì£ !",
                        "emotion": "happy"
                    },
                    {
                        "type": "transition",
                        "mode": "IDE"
                    }
                ]
            }
        }
    ],
    "storyContext": {
        "introImage": "/assets/mission3/nook_store_inside.png",
        "introDialogue": [
            "ì–´ì„œì˜¤ê²Œêµ¬ë¦¬! ìë„¤ê°€ ì¡ì€ ë†ì–´ 10ë§ˆë¦¬, ì•„ì£¼ ì‹±ì‹±í•˜ë”êµ¬ë§Œ.",
            "ì, ì—¬ê¸° 4,000ë²¨ì¼ì„¸!",
            "...",
            "ì–´ë¼? ê°€ê²Œ ë¬¸ì„ ë‚˜ì„œìë§ˆì ëˆì´ ì‚¬ë¼ì¡Œì–´! ê·€ì‹ ì´ ê³¡í•  ë…¸ë¦‡ì´êµ°."
        ],
        "successDialogue": [
            "í›Œë¥­í•˜ë„¤! ì´ì œ ìë„¤ ëˆì€ ì•ˆì „í•˜ê²Œ ìë„¤ ì§€ê°‘ì— ë“¤ì–´ê°”ì–´.",
            "ì•ìœ¼ë¡œë„ ë³€ìˆ˜ì˜ ìˆ˜ëª…(Lifecycle)ì„ ì˜ ìƒê°í•˜ê²Œë‚˜, êµ¬ë¦¬!"
        ],
        "failureDialogue": [
            "ì €ëŸ°... ëˆì´ ë˜ ì‚¬ë¼ì¡Œì–´?",
            "ë©”ì†Œë“œ ì•ˆì—ì„œë§Œ ë³€ìˆ˜ë¥¼ ë§Œë“¤ë©´ ê¸ˆë°© ì‚¬ë¼ì§„ë‹¤ë„¤. í´ë˜ìŠ¤ ì „ì²´ì—ì„œ ì“°ëŠ” 'ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜'ë¥¼ ê¸°ì–µí•˜ê²Œ!"
        ]
    },
    "rewards": {
        "basePoints": 300,
        "speedBonus": 50,
        "perfectBonus": 50
    },
    "unlocks": [],
    "prerequisites": [
        "mission-002"
    ],
    "scenario": {
        "setting": {
            "background": "/assets/mission3/nook_store_inside.png",
            "characters": [
                {
                    "id": "player",
                    "initialPosition": {
                        "x": 200,
                        "y": 300
                    },
                    "sprite": "/assets/character/player.png",
                    "direction": "right",
                    "scale": 2
                },
                {
                    "id": "nook",
                    "initialPosition": {
                        "x": 400,
                        "y": 300
                    },
                    "sprite": "/assets/character/nook.png",
                    "direction": "left",
                    "scale": 2
                }
            ]
        },
        "script": [
            {
                "type": "dialogue",
                "speaker": "nook",
                "text": "ì–´ì„œì˜¤ê²Œêµ¬ë¦¬! ìë„¤ê°€ ì¡ì€ ë†ì–´ 10ë§ˆë¦¬, ì•„ì£¼ ì‹±ì‹±í•˜ë”êµ¬ë§Œ.",
                "emotion": "happy"
            },
            {
                "type": "move",
                "target": "nook",
                "to": {
                    "x": 350,
                    "y": 300
                },
                "speed": "walk"
            },
            {
                "type": "dialogue",
                "speaker": "nook",
                "text": "ì, ì—¬ê¸° 4,000ë²¨ì¼ì„¸! ì•„ì£¼ í° ëˆì´ì§€."
            },
            {
                "type": "effect",
                "effectName": "coin_sound"
            },
            {
                "type": "dialogue",
                "speaker": "nook",
                "text": "ì, ê·¸ëŸ¼ ì´ì œ ê°€ì„œ ëŒ€ì¶œê¸ˆì„..."
            },
            {
                "type": "move",
                "target": "player",
                "to": {
                    "x": 100,
                    "y": 300
                },
                "speed": "walk"
            },
            {
                "type": "emote",
                "target": "player",
                "emoji": "shocked"
            },
            {
                "type": "dialogue",
                "speaker": "player",
                "text": "ì–´ë¼? ë‚´ ì£¼ë¨¸ë‹ˆê°€ ë¹„ì—ˆì–´! ë°©ê¸ˆ ë°›ì€ 4,000ë²¨ì´ ì‚¬ë¼ì¡Œì–´ìš”!",
                "emotion": "shocked"
            },
            {
                "type": "dialogue",
                "speaker": "nook",
                "text": "í—ˆí—ˆ, ìë„¤ 'ì§€ì—­ ë³€ìˆ˜' ì§€ê°‘ì„ ì“´ ê±´ê°€? ê·¸ê±´ ê°€ê²Œ ë‚˜ê°€ë©´ ì‚¬ë¼ì§„ë‹¤ê³ !",
                "emotion": "normal"
            },
            {
                "type": "transition",
                "mode": "IDE"
            }
        ]
    }
}