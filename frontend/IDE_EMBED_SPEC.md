# ë„ˆêµ´í¬íŠ¸ IDE ì„ë² ë“œ ë° ì°½ ê´€ë¦¬ ê¸°ìˆ  ì‚¬ì–‘ì„œ

## 1. ê°œìš”

StoryPage ë‚´ì— ë„ˆêµ´í¬íŠ¸ IDEë¥¼ ì„ë² ë“œí•˜ë©´ì„œë„, ì „ì²´ í™”ë©´ìœ¼ë¡œ í™•ì¥í•˜ê±°ë‚˜ ìµœì†Œí™”í•  ìˆ˜ ìˆëŠ” Windows ìŠ¤íƒ€ì¼ì˜ ì°½ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„

## 2. í•µì‹¬ ê¸°ëŠ¥

### 2.1 IDE ì„ë² ë“œ ë·° (StoryPage ë‚´)
- **ê¸°ë³¸ ìƒíƒœ**: StoryPage í•˜ë‹¨ì— ì‘ì€ IDE ì°½ìœ¼ë¡œ í‘œì‹œ
- **í¬ê¸°**: ë„ˆêµ´í° ì›ë³¸ í¬ê¸° (360x600px)
- **ìœ„ì¹˜**: ì˜¤ë¥¸ìª½ í•˜ë‹¨ ë˜ëŠ” ë“œë˜ê·¸ ê°€ëŠ¥í•œ ìœ„ì¹˜
- **ê¸°ëŠ¥**:
  - ë¯¸ë‹ˆ ë·°ì—ì„œë„ ì½”ë“œ ì‘ì„± ë° ì‹¤í–‰ ê°€ëŠ¥
  - ë„ˆêµ´ í”¼ë“œë°± í‘œì‹œ
  - í¬ì¸íŠ¸/ë°°ì§€ íšë“

### 2.2 IDE ì°½ ê´€ë¦¬ (Window Manager)

#### 2.2.1 ìµœì†Œí™” (Minimize)
- ì•¡ì…˜: ìœˆë„ìš° ì œëª© í‘œì‹œì¤„ì˜ ìµœì†Œí™” ë²„íŠ¼ í´ë¦­
- ë™ì‘: IDE ì°½ì´ ì‘ì€ ì•„ì´ì½˜ìœ¼ë¡œ ì¶•ì†Œ
- í‘œì‹œ: í™”ë©´ í•˜ë‹¨ ë˜ëŠ” ì¸¡ë©´ì— ë¯¸ë‹ˆ ì•„ì´ì½˜
- ë³µì›: ì•„ì´ì½˜ í´ë¦­ ì‹œ ì›ë˜ í¬ê¸°ë¡œ ë³µì›

#### 2.2.2 ìµœëŒ€í™” (Maximize)
- ì•¡ì…˜: ì œëª© í‘œì‹œì¤„ì˜ ìµœëŒ€í™” ë²„íŠ¼ í´ë¦­
- ë™ì‘: IDEê°€ ì „ì²´ í™”ë©´(ë˜ëŠ” ê±°ì˜ ì „ì²´)ìœ¼ë¡œ í™•ì¥
- ìƒíƒœ: ìµœëŒ€í™” ìƒíƒœì—ì„œ StoryPage ì½˜í…ì¸  ìˆ¨ê¹€
- ë³µì›: ìµœëŒ€í™” í•´ì œ ë²„íŠ¼ìœ¼ë¡œ ì›ë˜ í¬ê¸°ë¡œ ëŒì•„ê°

#### 2.2.3 ì°½ ë‹«ê¸° (Close)
- ì•¡ì…˜: ì œëª© í‘œì‹œì¤„ì˜ X ë²„íŠ¼ í´ë¦­
- ë™ì‘: IDE ì°½ ë‹«ìŒ
- ì €ì¥: ì½”ë“œ ë° ìƒíƒœëŠ” localStorageì— ìë™ ì €ì¥
- ì¬ì—´ê¸°: ê°™ì€ ë¯¸ì…˜ ì§„ì… ì‹œ ì´ì „ ìƒíƒœ ë³µì›

#### 2.2.4 ì°½ ì´ë™ (Drag & Move)
- ì•¡ì…˜: ì œëª© í‘œì‹œì¤„ì„ ë§ˆìš°ìŠ¤ë¡œ ë“œë˜ê·¸
- ë™ì‘: ì°½ì´ í™”ë©´ ë‚´ì—ì„œ ììœ ë¡­ê²Œ ì´ë™
- ì œì•½: ì°½ì´ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šë„ë¡ ì œí•œ
- ë¯¸ë‹ˆí™” ìƒíƒœ: ì´ë™ ë¶ˆê°€

#### 2.2.5 ì°½ í¬ê¸° ì¡°ì ˆ (Resize)
- ì•¡ì…˜: ì°½ì˜ ëª¨ì„œë¦¬/ì½”ë„ˆë¥¼ ë“œë˜ê·¸
- ë™ì‘: ì°½ì˜ ë„ˆë¹„/ë†’ì´ ì¡°ì ˆ
- ìµœì†Œ í¬ê¸°: ë„ˆêµ´í° ìµœì†Œ ê¶Œì¥ í¬ê¸° (300x500px)
- ìµœëŒ€ í¬ê¸°: í™”ë©´ í¬ê¸°ì— ë§ì¶¤

## 3. UI êµ¬ì¡°

### 3.1 IDE ì°½ ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [â”€] [ğŸ”²] [âœ•]  ë„ˆêµ´í¬íŠ¸ IDE v2.0  â”‚ â† ì œëª© í‘œì‹œì¤„ (Draggable)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚    ë„ˆêµ´í¬íŠ¸ IDE ì½˜í…ì¸              â”‚ â† NookPhone UI
â”‚  (ë¯¸ì…˜, ì—ë””í„°, ì§„í–‰ë„ íƒ­)         â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â†— í™”ë©´ ëª¨ì„œë¦¬ (Resize Handle)      â”‚ â† í¬ê¸° ì¡°ì ˆ ì˜ì—­
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ì œëª© í‘œì‹œì¤„ (Title Bar)
- ë†’ì´: 40px
- ë°°ê²½ìƒ‰: #7D5A44 (ë™ë¬¼ì˜ ìˆ² ë¸Œë¼ìš´)
- í…ìŠ¤íŠ¸: "ë„ˆêµ´í¬íŠ¸ IDE v2.0" (í™”ì´íŠ¸, ì¤‘ì•™)
- ë²„íŠ¼ë“¤:
  - [âˆ’] ìµœì†Œí™” (15x15px)
  - [â–¡] ìµœëŒ€í™”/ë³µì› (15x15px)
  - [âœ•] ë‹«ê¸° (15x15px)
  - ì˜¤ë¥¸ìª½ ì •ë ¬, ê°„ê²© 5px

### 3.3 ìµœì†Œí™” ì•„ì´ì½˜ í‘œì‹œì¤„ (Minimized Icons Bar)
- ìœ„ì¹˜: í™”ë©´ í•˜ë‹¨ (z-index ë§¤ìš° ë†’ìŒ)
- ë†’ì´: 50px
- ë°°ê²½ìƒ‰: rgba(0,0,0,0.7)
- ì•„ì´ì½˜: 30x40px ì¸ë„¤ì¼
- í˜¸ë²„ ì‹œ: ì°½ ì´ë¦„ íˆ´íŒ í‘œì‹œ

## 4. ìƒíƒœ ê´€ë¦¬

### 4.1 IDE ìœˆë„ìš° ìƒíƒœ
```typescript
interface IDEWindowState {
  isVisible: boolean;          // ì°½ í‘œì‹œ ì—¬ë¶€
  isMinimized: boolean;        // ìµœì†Œí™” ìƒíƒœ
  isMaximized: boolean;        // ìµœëŒ€í™” ìƒíƒœ

  // ì¼ë°˜ ìƒíƒœ ìœ„ì¹˜/í¬ê¸°
  position: { x: number; y: number };
  size: { width: number; height: number };

  // ìµœëŒ€í™” ì „ ìœ„ì¹˜/í¬ê¸° ì €ì¥
  previousPosition: { x: number; y: number };
  previousSize: { width: number; height: number };

  // IDE ë‚´ë¶€ ìƒíƒœ
  currentMission: string | null;
  codeContent: string;
  selectedTab: 'missions' | 'editor' | 'progress';

  // ìë™ ì €ì¥
  lastSaved: number;
}
```

### 4.2 localStorage ì €ì¥ êµ¬ì¡°
```json
{
  "nookphone_ide_state": {
    "position": { "x": 100, "y": 200 },
    "size": { "width": 360, "height": 600 },
    "isMinimized": false,
    "isMaximized": false,
    "currentMission": "variables_001",
    "codeContent": "...",
    "selectedTab": "editor"
  }
}
```

## 5. ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ê³„íš

### 5.1 ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸
1. **IDEWindowManager** (ìƒìœ„ ì»¨í…Œì´ë„ˆ)
   - ì „ì²´ ì°½ ê´€ë¦¬ ë¡œì§
   - ìƒíƒœ ê´€ë¦¬ (useState)
   - ë“œë˜ê·¸/ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ëŸ¬

2. **IDEWindowFrame** (ì°½ í‹€)
   - ì œëª© í‘œì‹œì¤„ ë Œë”ë§
   - ë²„íŠ¼ ì´ë²¤íŠ¸ ì²˜ë¦¬
   - ë“œë˜ê·¸ ì˜ì—­ ì •ì˜

3. **IDEWindowContent** (ì½˜í…ì¸ )
   - NookPhone IDE UI ì„ë² ë“œ
   - ë¯¸ì…˜/ì—ë””í„°/ì§„í–‰ë„ íƒ­

4. **IDEMinimizedBar** (ìµœì†Œí™” í‘œì‹œì¤„)
   - ìµœì†Œí™”ëœ ì°½ ëª©ë¡
   - ì•„ì´ì½˜ ë Œë”ë§
   - ë³µì› í´ë¦­ í•¸ë“¤ëŸ¬

### 5.2 ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
```typescript
// ì°½ ìœ„ì¹˜ ì œì•½ (í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šë„ë¡)
function constrainWindowPosition(
  position: {x: number, y: number},
  windowSize: {width: number, height: number},
  screenSize: {width: number, height: number}
): {x: number, y: number}

// ë“œë˜ê·¸ ì´ë²¤íŠ¸ ì²˜ë¦¬
function handleWindowDrag(
  e: MouseEvent,
  startPos: {x: number, y: number},
  startOffset: {x: number, y: number}
): {x: number, y: number}

// ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬
function handleWindowResize(
  e: MouseEvent,
  startSize: {width: number, height: number},
  direction: 'nw' | 'n' | 'ne' | 'e' | 'se' | 's' | 'sw' | 'w'
): {width: number, height: number}

// ìƒíƒœ ì €ì¥/ë³µì›
function saveIDEState(state: IDEWindowState): void
function loadIDEState(): IDEWindowState | null
```

## 6. ìŠ¤íƒ€ì¼ (Tailwind CSS)

### 6.1 ì°½ ìŠ¤íƒ€ì¼
```css
/* IDE ì°½ í”„ë ˆì„ */
.ide-window {
  position: fixed;
  background: white;
  border-radius: 12px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.3);
  z-index: 1000;

  user-select: none; /* ë“œë˜ê·¸ ì¤‘ í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€ */
}

/* ì œëª© í‘œì‹œì¤„ */
.ide-window-titlebar {
  height: 40px;
  background: #7D5A44;
  color: white;
  border-radius: 12px 12px 0 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 8px;
  cursor: grab;
  user-select: none;
}

.ide-window-titlebar:active {
  cursor: grabbing;
}

/* ë²„íŠ¼ */
.ide-window-btn {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border-radius: 4px;
  transition: background 0.2s;
}

.ide-window-btn:hover {
  background: rgba(255,255,255,0.2);
}

.ide-window-btn:active {
  background: rgba(255,255,255,0.3);
}

/* ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤ */
.ide-window-resize-handle {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 16px;
  height: 16px;
  cursor: nwse-resize;
}

/* ìµœì†Œí™” í‘œì‹œì¤„ */
.minimized-icons-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 50px;
  background: rgba(0,0,0,0.7);
  display: flex;
  gap: 8px;
  padding: 8px;
  z-index: 999;
}

.minimized-icon {
  width: 30px;
  height: 40px;
  background: white;
  border-radius: 4px;
  cursor: pointer;
  overflow: hidden;
  border: 2px solid #7D5A44;
}
```

## 7. ì´ë²¤íŠ¸ ì²˜ë¦¬

### 7.1 ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸
- **onMouseDown** (ì œëª© í‘œì‹œì¤„): ë“œë˜ê·¸ ì‹œì‘
- **onMouseMove** (document): ë“œë˜ê·¸/ë¦¬ì‚¬ì´ì¦ˆ ì§„í–‰
- **onMouseUp** (document): ë“œë˜ê·¸/ë¦¬ì‚¬ì´ì¦ˆ ì¢…ë£Œ

### 7.2 í„°ì¹˜ ì´ë²¤íŠ¸ (ëª¨ë°”ì¼ ì§€ì›)
- **onTouchStart**: í„°ì¹˜ ë“œë˜ê·¸ ì‹œì‘
- **onTouchMove**: í„°ì¹˜ ë“œë˜ê·¸ ì§„í–‰
- **onTouchEnd**: í„°ì¹˜ ë“œë˜ê·¸ ì¢…ë£Œ

### 7.3 í‚¤ë³´ë“œ ì´ë²¤íŠ¸
- **Escape**: IDE ì°½ ë‹«ê¸°
- **Alt+M**: ìµœì†Œí™”/ë³µì› í† ê¸€
- **Alt+X**: IDE ìµœëŒ€í™”/ë³µì›

## 8. êµ¬í˜„ ìˆœì„œ

1. **Phase 1**: IDEWindowManager ê¸°ë³¸ êµ¬ì¡°
   - ìƒíƒœ ê´€ë¦¬
   - ìœ„ì¹˜/í¬ê¸° ê´€ë¦¬
   - localStorage ì €ì¥/ë³µì›

2. **Phase 2**: ë“œë˜ê·¸ ê¸°ëŠ¥
   - ì œëª© í‘œì‹œì¤„ ë“œë˜ê·¸
   - ìœ„ì¹˜ ì œì•½ ë¡œì§
   - ì‹œê°ì  í”¼ë“œë°±

3. **Phase 3**: ë¦¬ì‚¬ì´ì¦ˆ ê¸°ëŠ¥
   - ëª¨ì„œë¦¬ ë¦¬ì‚¬ì´ì¦ˆ í•¸ë“¤
   - 8ë°©í–¥ ë¦¬ì‚¬ì´ì¦ˆ
   - ìµœì†Œ/ìµœëŒ€ í¬ê¸° ì œì•½

4. **Phase 4**: ìµœì†Œí™”/ìµœëŒ€í™”
   - ìµœì†Œí™” ë²„íŠ¼ ë¡œì§
   - ìµœì†Œí™” í‘œì‹œì¤„
   - ìµœëŒ€í™”/ë³µì› ê¸°ëŠ¥

5. **Phase 5**: StoryPage í†µí•©
   - IDEWindowManagerë¥¼ StoryPageì— ì¶”ê°€
   - ìŠ¤í† ë¦¬ í…ìŠ¤íŠ¸ì™€ IDE ì°½ ê²¹ì¹¨ ì²˜ë¦¬
   - ìŠ¤íƒ€ì¼ ì¡°ì •

6. **Phase 6**: í…ŒìŠ¤íŠ¸ ë° ìµœì í™”
   - E2E í…ŒìŠ¤íŠ¸ ì‘ì„±
   - ì„±ëŠ¥ ìµœì í™”
   - ëª¨ë°”ì¼ ë°˜ì‘í˜• í…ŒìŠ¤íŠ¸

## 9. ì˜ˆìƒ íŒŒì¼ êµ¬ì¡°

```
frontend/src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ IDEWindowManager.tsx       (ë©”ì¸ ì°½ ê´€ë¦¬)
â”‚   â”œâ”€â”€ IDEWindowFrame.tsx         (ì°½ í‹€)
â”‚   â”œâ”€â”€ IDEWindowContent.tsx       (ì½˜í…ì¸ )
â”‚   â”œâ”€â”€ IDEMinimizedBar.tsx        (ìµœì†Œí™” í‘œì‹œì¤„)
â”‚   â””â”€â”€ IDEWindowManager.css       (ìŠ¤íƒ€ì¼)
â””â”€â”€ pages/
    â””â”€â”€ StoryPage.tsx              (í†µí•©)
```

## 10. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

- ë“œë˜ê·¸/ë¦¬ì‚¬ì´ì¦ˆ ì‹œ requestAnimationFrame ì‚¬ìš©
- ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ìµœì†Œí™” (useMemo, useCallback)
- localStorage ì €ì¥ì€ ë””ë°”ìš´ìŠ¤ (500ms)
- z-index ë ˆì´ì–´ ê´€ë¦¬

## 11. ì ‘ê·¼ì„±

- í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›
- ARIA ë ˆì´ë¸” ì¶”ê°€
- í¬ì»¤ìŠ¤ ê´€ë¦¬
- ìŠ¤í¬ë¦° ë¦¬ë” ì§€ì›

---

**ì‘ì„±ì¼**: 2025-12-01
**ë²„ì „**: 1.0
**ìƒíƒœ**: êµ¬í˜„ ì¤€ë¹„ ì™„ë£Œ
