# ëª¨ë‹ˆí„°ë§ ë° ê´€ì°°ì„± (Observability) ê³„íš

**ëª©í‘œ**: í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‹œìŠ¤í…œ ê±´ê°•ë„ ë° ì„±ëŠ¥ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

---

## ğŸ” ëª¨ë‹ˆí„°ë§ ì „ëµ

### 1ë‹¨ê³„: ì—ëŸ¬ ì¶”ì  (Sentry)

#### ì„¤ì¹˜ ë° êµ¬ì„±
```bash
npm install @sentry/node @sentry/tracing
```

#### í†µí•© ì½”ë“œ
```typescript
import * as Sentry from '@sentry/node';

Sentry.init({
  dsn: process.env.SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 0.1,
  integrations: [
    new Sentry.Integrations.Http({ tracing: true }),
  ],
});

// ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€
app.use(Sentry.Handlers.requestHandler());
app.use(Sentry.Handlers.errorHandler());
```

#### ëª¨ë‹ˆí„°ë§ í•­ëª©
```
âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ í¬ë˜ì‹œ
âœ… ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì˜ˆì™¸
âœ… API ì—ëŸ¬ ì‘ë‹µ
âœ… íƒ€ì„ì•„ì›ƒ ë° ì—°ê²° ì‹¤íŒ¨
âœ… ë¦¬ì†ŒìŠ¤ ë¶€ì¡± ì•Œë¦¼
âœ… ì„±ëŠ¥ ì„ê³„ê°’ ì´ˆê³¼
```

### 2ë‹¨ê³„: ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (Datadog)

#### ì„¤ì¹˜ ë° êµ¬ì„±
```bash
npm install dd-trace
```

#### í†µí•© ì½”ë“œ
```typescript
import tracer from 'dd-trace';

tracer.init({
  service: 'animal-forest-api',
  env: process.env.NODE_ENV,
  version: process.env.APP_VERSION,
});

// ìë™ ê³„ì¸¡
tracer.use('express', { service: 'express' });
tracer.use('postgres', { service: 'postgres' });
```

#### ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­
```
ğŸ“Š ì‘ë‹µ ì‹œê°„:
â”œâ”€ Health Check: < 10ms
â”œâ”€ Characters: < 100ms
â”œâ”€ Topics: < 100ms
â”œâ”€ Search: < 500ms
â””â”€ TTS: < 2000ms

ğŸ“Š ì²˜ë¦¬ëŸ‰:
â”œâ”€ ìš”ì²­/ì´ˆ (RPS)
â”œâ”€ ë°”ì´íŠ¸/ì´ˆ (throughput)
â””â”€ ë™ì‹œ ì—°ê²° ìˆ˜

ğŸ“Š ë¦¬ì†ŒìŠ¤ ì‚¬ìš©:
â”œâ”€ CPU %
â”œâ”€ ë©”ëª¨ë¦¬ %
â”œâ”€ ë””ìŠ¤í¬ ì‚¬ìš©
â””â”€ ë„¤íŠ¸ì›Œí¬ I/O

ğŸ“Š ì—ëŸ¬ìœ¨:
â”œâ”€ 5xx ì—ëŸ¬ìœ¨
â”œâ”€ 4xx ì—ëŸ¬ìœ¨
â””â”€ íƒ€ì„ì•„ì›ƒìœ¨
```

### 3ë‹¨ê³„: ì‚¬ìš©ì ë¶„ì„ (Google Analytics / Mixpanel)

#### ì¶”ì  ì´ë²¤íŠ¸
```
ğŸ® ì‚¬ìš©ì í–‰ë™:
â”œâ”€ í˜ì´ì§€ ë·° (Entry, Login, Story, IDE)
â”œâ”€ ë²„íŠ¼ í´ë¦­ (Start, Skip, Next)
â”œâ”€ í¼ ì œì¶œ (ë¡œê·¸ì¸)
â”œâ”€ ë¯¸ì…˜ ì™„ë£Œ (ì§„í–‰ë„)
â””â”€ API í˜¸ì¶œ ê²°ê³¼

ğŸ‘¥ ì‚¬ìš©ì ì„¸ê·¸ë¨¼íŠ¸:
â”œâ”€ ì‹ ê·œ ì‚¬ìš©ì
â”œâ”€ ì¬ë°©ë¬¸ ì‚¬ìš©ì
â”œâ”€ í™œì„± ì‚¬ìš©ì
â””â”€ ì´íƒˆ ì‚¬ìš©ì

ğŸ’° ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­:
â”œâ”€ ì „í™˜ìœ¨
â”œâ”€ ì‚¬ìš©ì ìœ ì§€ìœ¨
â”œâ”€ ì°¸ì—¬ë„
â””â”€ ì™„ë£Œìœ¨
```

---

## ğŸ“Š ëŒ€ì‹œë³´ë“œ êµ¬ì„±

### ì‹œìŠ¤í…œ ê±´ê°•ë„ ëŒ€ì‹œë³´ë“œ
```
[Sentry + Datadog]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‹œìŠ¤í…œ ìƒíƒœ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ ê°€ìš©ì„±: 99.9%                     â”‚
â”‚ â€¢ ì—ëŸ¬ìœ¨: 0.1%                      â”‚
â”‚ â€¢ í‰ê·  ì‘ë‹µì‹œê°„: 45ms              â”‚
â”‚ â€¢ ë§ˆì§€ë§‰ ë°°í¬: 1ì‹œê°„ ì „            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API ì„±ëŠ¥                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GET /health        â”‚ 4.5ms  â”‚ âœ…   â”‚
â”‚ GET /characters    â”‚ 4.7ms  â”‚ âœ…   â”‚
â”‚ GET /topics        â”‚ 4.8ms  â”‚ âœ…   â”‚
â”‚ GET /search        â”‚ 5.4ms  â”‚ âœ…   â”‚
â”‚ POST /tts          â”‚ 245ms  â”‚ âœ…   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CPU: 15% (ì •ìƒ)                     â”‚
â”‚ Memory: 45% (ì •ìƒ)                  â”‚
â”‚ Disk: 60% (ì •ìƒ)                    â”‚
â”‚ Network: 120 Mbps (ì •ìƒ)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìµœê·¼ ì—ëŸ¬ (ìµœê·¼ 24ì‹œê°„)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TypeError: 3ê±´                       â”‚
â”‚ Timeout: 2ê±´                        â”‚
â”‚ Connection Error: 1ê±´                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­ ëŒ€ì‹œë³´ë“œ
```
[Google Analytics / Mixpanel]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì í™œë™ (ì˜¤ëŠ˜)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì´ ë°©ë¬¸ì: 1,234ëª…                  â”‚
â”‚ ì‹ ê·œ ì‚¬ìš©ì: 234ëª…                  â”‚
â”‚ ì„¸ì…˜: 2,456ê°œ                       â”‚
â”‚ í‰ê·  ì„¸ì…˜ ì‹œê°„: 4ë¶„ 23ì´ˆ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì „í™˜ ë‹¨ê³„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Entry Page: 1,234ëª… (100%)          â”‚
â”‚ Login Page: 890ëª… (72%)             â”‚
â”‚ Story Page: 670ëª… (54%)             â”‚
â”‚ IDE Page: 450ëª… (36%)               â”‚
â”‚ Mission Complete: 180ëª… (15%)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¸ê¸° ì½˜í…ì¸  (Top 5)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Variables: 234ëª…                 â”‚
â”‚ 2. Functions: 201ëª…                 â”‚
â”‚ 3. Loops: 189ëª…                     â”‚
â”‚ 4. Conditionals: 156ëª…              â”‚
â”‚ 5. Data Types: 134ëª…                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš¨ ì•Œë¦¼ ê·œì¹™

### ì‹¬ê°ë„ë³„ ì•Œë¦¼

#### ğŸ”´ Critical (ì¦‰ì‹œ ëŒ€ì‘)
```
â€¢ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹¤ìš´
â€¢ ì—ëŸ¬ìœ¨ > 5%
â€¢ ì‘ë‹µì‹œê°„ > 1ì´ˆ (ì¼ê´€ì )
â€¢ ë©”ëª¨ë¦¬ > 85%
â€¢ CPU > 90%
```

#### ğŸŸ  High (1ì‹œê°„ ë‚´ ëŒ€ì‘)
```
â€¢ ì—ëŸ¬ìœ¨ > 1%
â€¢ ì‘ë‹µì‹œê°„ > 500ms (ì§€ì†ì )
â€¢ ë©”ëª¨ë¦¬ > 70%
â€¢ CPU > 70%
â€¢ ë°°í¬ ì‹¤íŒ¨
```

#### ğŸŸ¡ Medium (4ì‹œê°„ ë‚´ ëŒ€ì‘)
```
â€¢ íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ ëŠë¦¼
â€¢ íƒ€ì„ì•„ì›ƒ 5ê±´ ì´ìƒ
â€¢ ë””ìŠ¤í¬ > 80%
â€¢ ë„¤íŠ¸ì›Œí¬ > 80% ì‚¬ìš©
```

#### ğŸŸ¢ Low (ì •ê¸° ì ê²€)
```
â€¢ ì„±ëŠ¥ ê°ì†Œ ì¶”ì„¸
â€¢ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì˜ì‹¬
â€¢ ë‚®ì€ ìºì‹œ íˆíŠ¸ìœ¨
â€¢ ì‚¬ìš©ì„± í”¼ë“œë°±
```

---

## ğŸ“ˆ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

### ë©”íŠ¸ë¦­ ì¢…ë¥˜

```
System Metrics:
â”œâ”€ CPU Usage %
â”œâ”€ Memory Usage %
â”œâ”€ Disk Usage %
â”œâ”€ Network I/O
â””â”€ Process Count

Application Metrics:
â”œâ”€ Request Rate (RPS)
â”œâ”€ Response Time (ms)
â”œâ”€ Error Rate %
â”œâ”€ Success Rate %
â””â”€ Cache Hit Rate %

Business Metrics:
â”œâ”€ Active Users
â”œâ”€ New Users
â”œâ”€ Session Duration
â”œâ”€ Conversion Rate
â””â”€ Feature Usage
```

### ìˆ˜ì§‘ ë¹ˆë„
```
System Metrics: 1ë¶„ë§ˆë‹¤
Application Metrics: 30ì´ˆë§ˆë‹¤
Business Metrics: 5ë¶„ë§ˆë‹¤
ì™¸ë¶€ ìƒíƒœ: 10ë¶„ë§ˆë‹¤
```

---

## ğŸ”” ì•Œë¦¼ ì±„ë„

```
ì´ë©”ì¼:
â”œâ”€ alerts@yourcompany.com (ëª¨ë“  ì•Œë¦¼)
â””â”€ ops@yourcompany.com (Criticalë§Œ)

Slack:
â”œâ”€ #alerts (Critical)
â”œâ”€ #performance (High/Medium)
â””â”€ #metrics (Daily Summary)

SMS/Phone:
â”œâ”€ Critical ì•Œë¦¼ë§Œ
â””â”€ ì•¼ê°„ ê·¼ë¬´ì ë°°ì •

Escalation:
â”œâ”€ 1ë‹¨ê³„: Slack ì•Œë¦¼
â”œâ”€ 2ë‹¨ê³„: ì´ë©”ì¼ ì•Œë¦¼
â”œâ”€ 3ë‹¨ê³„: SMS ì•Œë¦¼
â””â”€ 4ë‹¨ê³„: ì „í™” í˜¸ì¶œ
```

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: Sentry ì„¤ì • (1ì£¼)
- [ ] Sentry ê³„ì • ìƒì„±
- [ ] SDK í†µí•©
- [ ] ì—ëŸ¬ í”„ë¡œíŒŒì¼ë§ ì„¤ì •
- [ ] ì•Œë¦¼ ê·œì¹™ êµ¬ì„±

### Phase 2: Datadog ì„¤ì • (1-2ì£¼)
- [ ] Datadog ê³„ì • ìƒì„±
- [ ] APM ì—ì´ì „íŠ¸ ì„¤ì¹˜
- [ ] ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì„¤ì •
- [ ] ëŒ€ì‹œë³´ë“œ êµ¬ì„±

### Phase 3: ë¶„ì„ ì„¤ì • (1ì£¼)
- [ ] Google Analytics í†µí•©
- [ ] ì´ë²¤íŠ¸ ì¶”ì  ì„¤ì •
- [ ] ì‚¬ìš©ì ì„¸ê·¸ë¨¼íŠ¸ ì •ì˜

### Phase 4: ìš´ì˜ ë§¤ë‰´ì–¼ (1ì£¼)
- [ ] ì˜¨ì½œ(On-call) ì ˆì°¨ ì‘ì„±
- [ ] íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ
- [ ] ëŒ€ì‘ í”Œë ˆì´ë¶
- [ ] íŒ€ êµìœ¡

---

## âœ… ì„±ê³µ ê¸°ì¤€

```
âœ… ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ ì‘ë™
âœ… 99%+ ëª¨ë‹ˆí„°ë§ ê°€ìš©ì„±
âœ… ì•Œë¦¼ ì‘ë‹µ ì‹œê°„ < 5ë¶„
âœ… ì›” ë‹¤ìš´íƒ€ì„ < 43ë¶„ (99.9%)
âœ… í‰ê·  ì‘ë‹µ ì‹œê°„ < 100ms ìœ ì§€
```

---

**ìƒíƒœ**: ì„¤ê³„ ì™„ë£Œ, êµ¬í˜„ ëŒ€ê¸°
**ì˜ˆìƒ ì‹œì‘**: Phase 1 (ë°°í¬ í›„ 1ì£¼)
**ì˜ˆìƒ ì†Œìš”ì‹œê°„**: 4ì£¼ (ëª¨ë“  Phase)

